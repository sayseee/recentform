<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Live Soccer Scores, Results, Betting Odds | FUTBOL</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="">
        <style>
:root {   
    --bg-color-1: #010a0f; 
    --bg-color-2: #00141d;   
    --bg-active: #555e61;
    --color-highlight: #01203e;
    --color-support-1: #b9b9b9;
    --color-support-2-rgb: 200, 205, 205;
    --color-support-3: #001e28;
    --color-support-4: #555e61;
    --color-support-5: #fff;
    --color-4: #ddf1fc; /* Medium shade */
    --win-color: #18c876; /* Wins */
    --draw-color: rgba(109, 109, 110, 0.9);/* Draws */
    --loss-color: #c7361f;/* Losses */
    --blue-5:  #F2F3FA;  /* Blue (5) */
    --blue-100: #020F2A; /* Blue (100) */
    --color-tabs-secondary-background-base: #0f2d37;
    --color-tabs-secondary-background-active: #c80037;
    --color-tabs-secondary-fill-active: #fff;
    --color-tabs-secondary-fill-base: #c8cdcd;
    --color-combination-8: #0f2d37;
}
body {
    font-family: "Poppins", sans-serif; 
    font-weight: 400;
    font-style: normal;
    font-size: 13px; 
    line-height: 1.5;
    color: var(--color-support-1);
    text-align: left;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: var(--bg-color-1);
}

.W, .D, .L {  
    color: #fff;
    align-items: center; 
    display: flex;
    height: 20px;
    justify-content: center;
    overflow: hidden;
    position: relative; 
    padding:2px 0;
}
.W {
    background-color: var(--win-color);
}
.D {
    background-color: var(--draw-color);
}
.L {
    background-color: var(--loss-color);
}
/* Constants */
.flex {
    display: flex;
}
._F_r{
    flex-direction: row !important;
}
._F_c{
    flex-direction: column !important;
}
._F_ac {
    align-items: center;
}
._F_jc {
    justify-content: space-between;
}
.gT5 {
    gap: 5px;
}
.gT10 {
    gap: 10px;
}
.gT20 {
    gap: 20px;
}
._F1 {
    flex: 1;
}
._F2 {
    flex: 2;
}
._F3 {
    flex: 3;
}
a {
    color: var(--color-support-1);
    text-decoration: none;
}
a:hover {
    color: var(--color-support-5);
    text-decoration: none;
}
header#superheader {
    background: var(--bg-color-2);
    padding: 20px 0;
    display: flex;
}
header .logo {
    font-size: 24px;
    color: var(--color-support-5);
    font-weight: 900;
    margin-left: 50px
}
.filter-bar {
    color: var(--color-support-5);
    display: flex;
    width: calc(100% - 600px);
    margin-left: auto;
    gap: 20px;
}
/* Ensure the parent container is a flex container if using align-self */
.filter-bar input[type=date], .filter-bar input[type=select], button, .filter-bar select {    
    height: 30px;
    border: 0; 
    background-color:#000;
    color: var(--color-support-1);
    padding: 0 10px;
    border-radius: 4px;
}
/* Ensure the parent container is a flex container if using align-self */
.filter-bar input[type=date] {
    background-color:#000;
    border: 1px solid var(--color-support-3); 
    box-sizing: border-box;
    color: var(--color-support-1);
    padding: 10px;
    
    /* Remove align-self if not used within a flex container */
    /* align-self: flex-start; */
}
.filter-bar button {
    background-color: var(--color-support-4);
    color: var(--color-tabs-secondary-fill-base);
    font-weight: bold;
    padding: 5px 10px;
    cursor: pointer;
}
.filter-bar button:hover {
    background-color: var(--color-combination-8);
}
/* Categories container */
main {
    height: calc(100vh - 76px); /* Fill the viewport height minus 76px */  
    display: grid;
    grid-template-areas:
        "categories mainAnalysis sideRight";
    grid-template-columns: 22.22% 49.31% 28.47%;
    grid-template-rows: minmax(calc(100vh - 310px), 1fr);
    position: relative;
}

/* Categories container */
.categories {
    height: 100%; /* Fill the viewport height minus 76px */
    overflow-y: auto; /* Enable vertical scrolling */
    padding: 5px; /* Optional padding */ 
    border-right: var(--color-support-3) 1px solid;
    padding-top: 20px; 
}

.categories::-webkit-scrollbar, .tab-content::-webkit-scrollbar, .sideRight::-webkit-scrollbar {
    width: 2px; /* Set the width of the scrollbar */
}

.categories::-webkit-scrollbar-track, .tab-content::-webkit-scrollbar-track, .sideRight::-webkit-scrollbar-track {
    background: transparent; /* Color of the track */
}

.categories::-webkit-scrollbar-thumb, .tab-content::-webkit-scrollbar-thumb, .sideRight::-webkit-scrollbar-thumb {
    background: var(--color-support-3); /* Color of the thumb */
    border-radius: 1px; 
    height: 40px;
}
.categories h3 {
    font-size: 13px; 
}
.category-header {
    padding: 10px; 
    font-weight: 700;
    font-size: 14px;
    background-color: var(--color-support-3); 
}
.tournament h3 {
    margin: 0;
    padding: 10px;
    background-color: var(--bg-color-2);
    display: flex;
    align-items: center;
}
.tournament h3 img {
    margin-right: 10px;
}

.tournament ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    justify-content: space-between;
    flex-direction: column;}
    .tournament ul li {
    display: flex;
    align-items: center;
    padding: 0 5px;
}  .tournament ul li:not(:first-child) {
    border-top: var(--color-support-3) 1px solid;   
} 
.tournament ul li a {
    background: none;
    border: none;
    cursor: pointer;
    font-weight: normal; 
    transition: all 0.3s ease;
    text-decoration: none;
    display: flex;
    width: 100%;}
 

.tournament a {
    text-decoration: none;
    display: flex;
    justify-content: space-between;
}

.match-card {
    display: flex;
    align-items: center; 
    padding: 5px 0; 
    width: 100%;
    cursor: pointer;
} 
.match-status {
    color: #888;
}

.match-time-status {
    display: flex;
    flex-direction: column;
    margin-right: 8px;
    padding-right: 8px;
    text-align: center;
    flex: 0 0 45px;
    -webkit-box-flex: 0;
    color: #555;
    border-right: 1px solid rgba(34, 34, 38, 0.5);
}
.team-info {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    width: calc(100% - 35px);
    margin-left: auto;
}
.teams-info { 
    display: flex;
    flex-direction: column;
    overflow-x: clip;
    min-width: 0px;
    margin-left: auto;
    flex: 1 1 140px;
    gap: 3px;
}
.team {
    display: flex;
    align-items: center;
}

.team-logo {
    width: 16px;
    height: 16px;
    margin-right: 8px;
}

.team-name {
    font-size: 13px; 
}

.match-odds {
    display: flex;
    justify-content: space-between;
    align-items: center;  
    width: 105px;
    border-right: 1px solid rgba(34, 34, 38, 0.15);
    padding-right: 5px;
}

.odds {
    margin: 0 4px;
    font-size: 12px;
    font-weight: 600;
}
.odd-choice {
    display: flex;
    flex-direction: column;
    text-align: center;
    justify-content: space-between;
    gap: 5px;
    flex: 1;
}
.odd-choice span:first-child {
    color: rgb(74, 72, 72, 70%);
}
.match-score {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-left: 8px;
    flex: 0 0 20px;
    font-size: 14px;
    font-weight: 600;
    color: var(--color-tabs-secondary-fill-base);
    justify-content: space-around;
    gap: 5px;
} 
.mainAnalysis {
    grid-area: mainAnalysis;
    border-right: var(--color-support-3) 1px solid;
    height: 100vh; /* Fill the viewport height minus 76px */ 
    border-top: 1px solid var(--bg-color-1);
    background-color: #000;
}
nav {    
    align-items: center;
    display: flex;
    overflow-x: auto;
    width: 100%;
    background-color: var(--color-support-3);
    margin-bottom: 16px;
}
nav ul {    
    margin: 0;
    padding: 0;
    list-style: none;
    align-items: center;
    display: flex;
    overflow-x: auto;
    width: 100%;
    padding: 10px;
}
nav li {    
    font-weight: 700;
    letter-spacing: .4px;
    line-height: 12px;
    text-transform: uppercase;
    white-space: nowrap;
}
nav li a {    
    align-items: center;
    background-color: var(--color-combination-8);
    border-radius: 5px;
    color: var(--color-tabs-secondary-fill-base);
    cursor: pointer;
    display: flex;
    font-size: 12px;
    height: 28px;
    margin-right: 8px;
    padding: 0 12px;
}
nav li a.active {    
    align-items: center;
    background-color: var(--color-tabs-secondary-background-active);
    color: var(--color-tabs-secondary-fill-active);
}
.duelParticipant {
    --spacer: 17px;
    display: grid;
    grid-template:
        "home time away" max-content
        "home score away" max-content
        ". . . " 5px / var(--width, minmax(110px, 250px)) var(--width, minmax(80px, 180px)) var(--width, minmax(110px, 250px));
    justify-content: center;
    padding: 0 10px; 
    text-align: center; 
}
.duelParticipant__home { 
    display: flex;
    justify-content: center;
    grid-area: home;
    font-weight: 700;
    text-align: center;
    flex-direction: column;
    gap: 20px;
}
.duelParticipant__away { 
    display: flex;
    justify-content: center;
    grid-area: away; 
    font-weight: 700;
    text-align: center;
    flex-direction: column;
    gap: 20px;
}
.duelParticipant__home img, .duelParticipant__away img { 
    height: 58px;
    width: 58px;
}
.duelParticipant__score { 
    display: grid;
    justify-content: center;
    grid-area: score;    
    flex-flow: row wrap; 
} 
.detailScore__wrapper{
    font-size: 40px;
    font-weight: 600;
}
.duelParticipant .match-time { 
    display: grid;
    grid-area: time;
    text-align: center;
}
.next-match-container {
    padding: 10px 20px;
    justify-content: center;
    display: flex;
    flex-direction: column;
}
#next-match {
    padding-top: 0; 
    justify-content: center;
    display: flex;
    flex-direction: row; 
}
#next-match .category-group { 
    font-weight: 500;
}
#next-match h3 {
    text-align: center;
    font-size: 0.675rem;
    text-transform: uppercase;
    background-color: var(--color-support-3);
    padding: 10px;     
}
#home-next-match, #away-next-match {
    flex: 1;

}
.form-container h3, .h2h h3 {
    text-align: left;
    font-size: 0.675rem;
    text-transform: uppercase;
    background-color: var(--color-support-3);
    padding: 10px;    
    margin: 0;
}
.h2h strong {
    color: var(--color-support-1);
    line-height: 16px;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.home-form, .away-form, .atHome-form, .atAway-form {
    flex: 1;
} 

.event__row .tourn {
    width: 22px;
}

.event-row {padding:2px 5px; border-top: 1px solid #E6E9F695;}
.event-row:first-child {padding:4px; border-top: 0;}

.event-row:not(:first-child) {
    border-top: var(--color-support-3) 1px solid;   
} 

.event__row .score span {
    width: 16px;
    text-align: center;
}


.time { 
    margin: 0;
    width: 55px;
}

.homeParticipant, .awayParticipant { 
    flex: 1;  
}  
.form-result {
    align-items: center; 
    border-radius: 4px; 
    display: flex;
    height: 16px;
    justify-content: center;
    overflow: hidden;
    position: relative;
    width: 20px;
}
.sideRight {
    grid-area: sideRight;
    height: 100%; /* Fill the viewport height minus 76px */
    overflow-y: auto; /* Enable vertical scrolling */
    padding: 0 5px; 
    border-top: 1px solid var(--bg-color-1); /* Light gray border */
} 

.tab-menu {
    display: flex;
    border-bottom: 1px solid var(--bg-color-1); /* Light gray border */ 
    background-color: var(--color-support-3);
    padding: 10px;
}
 

.tab-button {
    text-transform: uppercase;
    align-items: center;
    background-color: var(--color-tabs-secondary-background-base);
    border-radius: 6px;
    color: var(--color-tabs-secondary-fill-base);
    display: flex;
    gap: 8px;
    height: 28px;
    padding: 0 12px;
    font-weight: 600;
    border: 0;
    font-size: 12px;
    cursor: pointer;
}


.tab-button:not(:first-child) {
    margin-left: 10px;
}

.tab-button:hover {
    background-color: var(--color-tabs-secondary-background-base);
}

.tab-button.active { 
    background-color: var(--color-tabs-secondary-background-active); 
    color: var(--color-tabs-secondary-fill-active);
}
.tab-content {
    display: none;
}

#events-tabs .tab-content {
    height: calc(100vh - 450px);
    overflow-y: auto;
    padding: 0 5px;
}

.tab-content.active {
    display: block;
}
#main-tabs .tab-content.active {
    display: block;
}
  
#standings-tabs .tab-content.active {
    display: block;
}
#standings-tabs  {
    position: relative;
}

.our-team {
    background-color: var(--color-highlight) !important;
    font-weight: 600;
}
/* Additional CSS for table styling */
table {
    width: 100%;
    border-collapse: collapse;
}

table th, table td { 
    border-bottom: 1px solid rgba(34, 34, 38, 0.5); 
    height: 29px;
    align-items: center;
}

table th:first-child, table td:first-child { 
    text-align: center;
}

table th {
    background-color: var(--color-5);
    text-align: left;
} 
#standings .tab-button { 
    padding: 10px;
} 
#standings .tab-content { 
    overflow-y: auto; /* Enable vertical scrolling */
    height: 80vh; /* Set the height to the full viewport height */ 
}

     </style>
    </head>
    <body> 
        <header id="superheader">
            <div class="logo">FUTBOL</div>
            <div class="filter-bar">
                <div>
                    From:                     
                    <input type="date" id="start-date" name="start-date">
                     To:<input type="date" id="end-date" name="end-date"> 
                </div>
                <div>
                    <select id="time-range">
                        <option value="">Select Time</option>
                        <option value="3">3 Hours</option>
                        <option value="6">6 Hours</option>
                        <option value="12">12 Hours</option>
                    </select>
                    <button id="filter-btn">Filter</button>
                </div> 
            </div>
        </header>
        <main>            
            <div id="categories-container" class="categories"></div>
            <div class="mainAnalysis">                                     
                <div class="main-nav"> 
                    <nav class="filters">
                        <ul class="filters__group">
                            <li><a href="#all-games" data-status="all" class="active">All</a></li>
                            <li><a href="#live-games" data-status="live">LIVE</a></li>
                            <li><a href="#finished-games" data-status="finished">Results</a></li>
                            <li><a href="#scheduled-games" data-status="scheduled">Upcoming</a></li>
                        </ul>
                    </nav> 
                </div>

                <div id="details-container"></div>
            </div>
            <div id="standings-container" class="sideRight"></div>
        </main>
        
        <script>
        const baseURL = 'https://api.sofascore.com/api/v1';
        
        const fetchJson = async (url) => {
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`Error ${response.status}: ${errorData.message}`);
                }
                return response.json();
            } catch (error) {
                console.error('Fetch error:', error.message);
                return null;
            }
        };
        
        const filterEventsByTime = (events, hours) => {
            const now = new Date().getTime();
            const timeRange = hours * 60 * 60 * 1000; // Convert hours to milliseconds
        
            return events.filter(event => {
                const eventTime = new Date(event.startTimestamp * 1000).getTime();
                return eventTime >= now && eventTime <= now + timeRange;
            });
        };
        
        const displayCategories = async (startDate, endDate, hours, status) => {
            const topTournamentsUrl = `${baseURL}/config/top-unique-tournaments/UG/football`;
            const scheduledEventsUrl = `${baseURL}/sport/football/scheduled-events/${startDate}`;
            const scheduledEventsUrl2 = `${baseURL}/sport/football/scheduled-events/${startDate}/inverse`;
            const oddsResponse = `${baseURL}/sport/football/odds/1/${startDate}`;
        
            try {
                const topTournamentsData = await fetchJson(topTournamentsUrl);
                const scheduledEventsData = await fetchJson(scheduledEventsUrl);
                const scheduledEventsData2 = await fetchJson(scheduledEventsUrl2);
                const oddsData = await fetchJson(oddsResponse);
        
                const events = [...scheduledEventsData.events, ...scheduledEventsData2.events];
                const odds = oddsData?.odds || {};
        
                // Filter by date
                let filteredEvents = events.filter(event => {
                    const eventDate = new Date(event.startTimestamp * 1000).toISOString().split('T')[0];
                    return eventDate >= startDate && eventDate <= endDate;
                });
        
                // Filter by time
                if (hours) {
                    filteredEvents = filterEventsByTime(filteredEvents, hours);
                }
        
                // Filter by status
                if (status) {
                    filteredEvents = filteredEvents.filter(event => {
                        console.log(event.status.type);  // Debugging
                        switch (status) {
                            case 'live':
                                return event.status.type === 'inprogress';
                            case 'finished':
                                return event.status.type === 'finished';
                            case 'scheduled':
                                return event.status.type === 'notstarted';
                            default:
                                return true;
                        }
                    });
                }

        
                // Filter by events that have odds
                filteredEvents = filteredEvents.filter(event => odds[event.id]);
        
                const topTournaments = topTournamentsData.uniqueTournaments;
                const topTournamentIds = topTournaments.map(tournament => tournament.id);
        
                const container = document.getElementById('categories-container');
                container.innerHTML = '';
        
                // Group events by top tournaments and other categories
                const topTournamentsMap = new Map();
                const otherCategoriesMap = new Map();
        
                filteredEvents.forEach(event => {
                    const categoryName = event.tournament.category.name;
                    const tournamentId = event.tournament.uniqueTournament.id;
                    const tournamentName = event.tournament.name;
        
                    const targetMap = topTournamentIds.includes(tournamentId) ? topTournamentsMap : otherCategoriesMap;
        
                    if (!targetMap.has(categoryName)) {
                        targetMap.set(categoryName, new Map());
                    }
        
                    const tournaments = targetMap.get(categoryName);
                    if (!tournaments.has(tournamentName)) {
                        tournaments.set(tournamentName, {
                            id: tournamentId,
                            events: []
                        });
                    }
        
                    tournaments.get(tournamentName).events.push(event);
                });
        
                const createCategorySection = (tournaments, categoryName) => {
                    const categoryItem = document.createElement('div');
                    categoryItem.classList.add('category');
        
                    const categoryHeader = document.createElement('div');
                    categoryHeader.classList.add('category-header', 'flex', 'gT10', '_F_ac');
                    const categoryImage = tournaments.values().next().value.events[0].tournament.category.alpha2
                        ? tournaments.values().next().value.events[0].tournament.category.alpha2.toLowerCase()
                        : tournaments.values().next().value.events[0].tournament.category.flag;
                    categoryHeader.innerHTML = ` 
                        <img src="https://www.sofascore.com/static/images/flags/${categoryImage}.png" width="20" height="20" loading="lazy" />
                        <span><span class="cat-name">${categoryName}</span></span> 
                    `;
                    categoryHeader.addEventListener('click', () => {
                        categoryItem.classList.toggle('active');
                        const tournamentsContainer = categoryItem.querySelector('.tournaments-container');
                        tournamentsContainer.style.display = categoryItem.classList.contains('active') ? 'block' : 'none';
                    });
        
                    const tournamentsContainer = document.createElement('div');
                    tournamentsContainer.classList.add('tournaments-container');
        
                    tournaments.forEach((tournament, tournamentName) => {
                        const tournamentSection = document.createElement('div');
                        tournamentSection.classList.add('tournament');
        
                        const tournamentHeader = document.createElement('h3');
                        tournamentHeader.classList.add('flex', '_F_ac');
                        const tournamentImage = `${baseURL}/unique-tournament/${tournament.id}/image`;
                        tournamentHeader.innerHTML = `
                            <img class="tourn" src="${tournamentImage}" alt="${tournamentName}" width="16" height="16" loading="lazy" />
                            ${tournamentName}
                        `;
                        tournamentSection.appendChild(tournamentHeader);
        
                        const eventsList = document.createElement('ul');
                        tournament.events.forEach(event => {
                            const listItem = document.createElement('li');
                            const eventLink = document.createElement('a');
                            eventLink.className = 'match-card';
                            eventLink.dataset.eventId = event.id; // Store event ID in a data attribute
        
                            // Get the odds data for this event
                            const oddsData = odds[event.id] || {};
                            const homeFractional = oddsData.choices?.find(choice => choice.name === '1')?.initialFractionalValue;
                            const drawFractional = oddsData.choices?.find(choice => choice.name === 'X')?.initialFractionalValue;
                            const awayFractional = oddsData.choices?.find(choice => choice.name === '2')?.initialFractionalValue;
        
                            const homeOdds = homeFractional ? fractionalToDecimal(homeFractional) : '-';
                            const drawOdds = drawFractional ? fractionalToDecimal(drawFractional) : '-';
                            const awayOdds = awayFractional ? fractionalToDecimal(awayFractional) : '-';
        
                            const homeScore = event.homeScore?.current ?? 0;
                            const awayScore = event.awayScore?.current ?? 0;
        
                            const isHomeTeamWinner = homeScore > awayScore;
                            const isAwayTeamWinner = awayScore > homeScore;
        
                            const homeTeamName = isHomeTeamWinner ? `<strong>${event.homeTeam.shortName}</strong>` : event.homeTeam.shortName;
                            const awayTeamName = isAwayTeamWinner ? `<strong>${event.awayTeam.shortName}</strong>` : event.awayTeam.shortName;
        
                            eventLink.innerHTML = `
                                <div class="match-time-status">
                                    <span class="match-time">${new Date(event.startTimestamp * 1000).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' }).replace(',', ' ').replace('/', ' ')}</span>
                                    <span class="match-status">${new Date(event.startTimestamp * 1000).toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' })}</span>
                                </div>
                                <div class="team-info">
                                    <div class="teams-info">
                                        <div class="team">
                                            <img src="${baseURL}/team/${event.homeTeam.id}/image" width="16" height="16" alt="${event.homeTeam.shortName}" loading="lazy" class="team-logo">
                                            <span class="team-name">${homeTeamName}</span>
                                        </div>
                                        <div class="team">
                                            <img src="${baseURL}/team/${event.awayTeam.id}/image" width="16" height="16" alt="${event.awayTeam.shortName}" loading="lazy" class="team-logo">
                                            <span class="team-name">${awayTeamName}</span>
                                        </div>
                                    </div>
                                    <div class="match-odds">
                                        <div class="odd-choice">
                                            <span class="odds">1</span>
                                            <span class="odds">${homeOdds}</span>
                                        </div>
                                        <div class="odd-choice">
                                            <span class="odds">X</span>
                                            <span class="odds">${drawOdds}</span>
                                        </div>
                                        <div class="odd-choice">
                                            <span class="odds">2</span>
                                            <span class="odds">${awayOdds}</span>
                                        </div>
                                    </div>
                                    <div class="match-score">
                                        <span class="score">${event.homeScore?.current ?? ''}</span>
                                        <span class="score">${event.awayScore?.current ?? ''}</span>
                                    </div>
                                </div> 
                            `; 
                            listItem.appendChild(eventLink);
                            eventsList.appendChild(listItem);
                        });
        
                        tournamentSection.appendChild(eventsList);
                        tournamentsContainer.appendChild(tournamentSection);
                    });
        
                    categoryItem.appendChild(categoryHeader);
                    categoryItem.appendChild(tournamentsContainer);
                    return categoryItem;
                };
        
                topTournamentsMap.forEach((tournaments, categoryName) => {
                    const categoryItem = createCategorySection(tournaments, categoryName);
                    container.appendChild(categoryItem);
                });
        
                otherCategoriesMap.forEach((tournaments, categoryName) => {
                    const categoryItem = createCategorySection(tournaments, categoryName);
                    container.appendChild(categoryItem);
                });
        
                // Display the first event's details
                if (filteredEvents.length > 0) {
                    displayEventDetails(filteredEvents[0].id);
                }
        
                // Add event listeners to match cards
                document.querySelectorAll('.match-card').forEach(card => {
                    card.addEventListener('click', async (event) => {
                        const eventId = event.currentTarget.dataset.eventId;
                        await displayEventDetails(eventId);
                    });
                });
        
            } catch (error) {
                console.error('Error displaying categories:', error);
            }
        };

        
            const fetchNextMatch = async (teamId) => {
                const nextMatchUrl = `${baseURL}/team/${teamId}/events/next/0`;
                const nextMatchData = await fetch(nextMatchUrl).then(response => response.json());
                if (!nextMatchData || !nextMatchData.events || nextMatchData.events.length === 0) return null;
                return nextMatchData.events[1]; // Get the next match
            };

            const displayNextMatch = async (teamId, containerId) => {
            const match = await fetchNextMatch(teamId);
            const container = document.getElementById(containerId);

            // Create the header if it does not already exist
            let header = container.querySelector('h3.next-match-header');
            if (!header) {
                header = document.createElement('h3');
                header.className = 'next-match-header'; // Assign a class to style it if needed
                header.textContent = 'Next Match';
                container.appendChild(header); // Append header directly to the container
            }

            // Find the .next-match-container element or create it if it doesn't exist
            let matchContainer = container.querySelector('.next-match-container');
            if (!matchContainer) {
                matchContainer = document.createElement('div');
                matchContainer.className = 'next-match-container';
                container.appendChild(matchContainer);
            }

            if (!match) {
                // Display 'No upcoming matches' message and clear the match container
                matchContainer.innerHTML = ''; // Clear existing content
                matchContainer.appendChild(document.createElement('p')).textContent = 'No upcoming matches.';
                return;
            }

            // Extract relevant details from the match data
            const { homeTeam, awayTeam, startTimestamp, status, tournament } = match;
            const { uniqueTournament } = tournament;

            // Create the match details HTML
            const matchInfoHtml = `    
                    <div class="category-group flex _F_ac">
                        <div>
                            <img class="tourn" src="${baseURL}/unique-tournament/${uniqueTournament.id}/image" alt="${uniqueTournament.name}" width="20" height="20" loading="lazy">
                        </div> 
                        <div class="category-tournament" style="display: flex;"> 
                            <span class="tournament-name">${uniqueTournament.name}</span>
                        </div> 
                    </div> 
                    <div class="match-card">
                        <div class="match-time-status">
                            <span class="match-time">${new Date(startTimestamp * 1000).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' }).replace(',', ' ').replace('/', ' ')}</span>
                            <span class="match-status">${new Date(startTimestamp * 1000).toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' })}</span>
                        </div>
                        <div class="team-info">
                            <div class="teams-info">
                                <div class="team">
                                    <img src="${baseURL}/team/${homeTeam.id}/image" width="16" height="16" alt="${homeTeam.shortName}" loading="lazy" class="team-logo">
                                    <span class="team-name">${homeTeam.shortName}</span>
                                </div>
                                <div class="team">
                                    <img src="${baseURL}/team/${awayTeam.id}/image" width="16" height="16" alt="${awayTeam.shortName}" loading="lazy" class="team-logo">
                                    <span class="team-name">${awayTeam.shortName}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                // Update the match container's HTML content with the match details
                matchContainer.innerHTML = matchInfoHtml; // Update existing match container
            };

            const fetchTeamStats = async (teamId, currentMatchId, currentMatchTimestamp) => {
                const teamEventsUrl = `${baseURL}/team/${teamId}/events/last/0`;
                const teamEventsData = await fetchJson(teamEventsUrl);
                if (!teamEventsData || !teamEventsData.events) return {}; 

                // Assuming teamEventsData is an object with an events array
                const teamEvents = teamEventsData.events;

                // Get the last 5 events from the team's data, reversing to get them in chronological order
                const overallEvents = teamEvents.slice(-5).reverse();

                // Filter and slice home and away events separately
                const homeEvents = teamEvents.filter(event => event.homeTeam.id === teamId).slice(-5).reverse();
                const awayEvents = teamEvents.filter(event => event.awayTeam.id === teamId).slice(-5).reverse();


                const calculateStats = (events) => {
                    const stats = {
                        wins: 0,
                        draws: 0,
                        losses: 0,
                        cleanSheets: 0,
                        failedToScore: 0,
                        btts: 0,
                        over1_5: 0,
                        over2_5: 0,
                        over3_5: 0,
                        results: [],
                        totalGoalsScored: 0,
                        totalGoalsConceded: 0,
                        fatigue: 0,
                        avgDaysBetweenMatches: 0,
                    };

                    events.forEach(event => {
                        if ((event.homeTeam.id === teamId || event.awayTeam.id === teamId) && event.status.type === 'finished' && event.id !== currentMatchId) {
                            const isHome = event.homeTeam.id === teamId;
                            const teamScore = isHome ? event.homeScore.current : event.awayScore.current;
                            const opponentScore = isHome ? event.awayScore.current : event.homeScore.current;
                            let result;
                            if (teamScore > opponentScore) {
                                stats.wins++;
                                result = 'W';
                            } else if (teamScore < opponentScore) {
                                stats.losses++;
                                result = 'L';
                            } else {
                                stats.draws++;
                                result = 'D';
                            }

                            stats.results.push({
                                result,
                                timeStamp: event.startTimestamp,
                                uniqueTournamentId: event.tournament.uniqueTournament?.id,
                                uniqueTournamentName: event.tournament.uniqueTournament?.name,
                                categoryName: event.tournament.category.name,
                                homeTeam: event.homeTeam.shortName,
                                awayTeam: event.awayTeam.shortName,
                                homeScore: event.homeScore.current,
                                awayScore: event.awayScore.current
                            });

                            if (teamScore === 0) stats.failedToScore++;
                            if (opponentScore === 0) stats.cleanSheets++;

                            if (teamScore > 0 && opponentScore > 0) stats.btts++;
                            if (teamScore + opponentScore >= 2) stats.over1_5++;
                            if (teamScore + opponentScore >= 3) stats.over2_5++;
                            if (teamScore + opponentScore >= 4) stats.over3_5++;

                            stats.totalGoalsScored += teamScore;
                            stats.totalGoalsConceded += opponentScore;
                        }
                    });

                    return stats;
                };

                return {
                    overall: calculateStats(overallEvents),
                    home: calculateStats(homeEvents),
                    away: calculateStats(awayEvents)
                };
            };


                    const displayLast5Events = (teamStats, containerId) => {
                        const container = document.getElementById(containerId);
                        container.innerHTML = '';

                        const events = teamStats.results.slice(0, 5); // Get the last 5 events
                        events.forEach(event => {

                            
                            const homeScore = event.homeScore ?? 0;
                            const awayScore = event.awayScore ?? 0;

                            const isHomeTeamWinner = homeScore > awayScore;
                            const isAwayTeamWinner = awayScore > homeScore;

                            const homeTeamName = isHomeTeamWinner ? `<strong>${event.homeTeam}</strong>` : event.homeTeam;
                            const awayTeamName = isAwayTeamWinner ? `<strong>${event.awayTeam}</strong>` : event.awayTeam;
            
                            const homeTeamScore = isHomeTeamWinner ? `<strong>${event.homeScore}</strong>` : event.homeScore;
                            const awayTeamScore = isAwayTeamWinner ? `<strong>${event.awayScore}</strong>` : event.awayScore;
            
                            const eventElem = document.createElement('div');
                            eventElem.className = 'event-row'; // Updated class name to match HTML/CSS
                            eventElem.innerHTML = `  
                                        <div class="event__row flex _F_r gT10 _F_ac">
                                            <span class="event-date time">${new Date(event.timeStamp * 1000).toLocaleDateString('en-GB', { day: '2-digit', month: '2-digit', year: '2-digit' }).replace(',', '.').replace('/', '.').replace('/', '.')}</span>
                                            <span class="tourn"><img src="${baseURL}/unique-tournament/${event.uniqueTournamentId}/image" alt="${event.uniqueTournamentName}"
                                                width="20" 
                                                height="20" 
                                                loading="lazy"
                                                onerror="this.onerror=null;this.src='https://www.sofascore.com/static/images/placeholders/tournament.svg';">
                                            </span>
                                            <span class="teamNames flex _F_c _F1">
                                                <span class="team-name homeParticipant">${homeTeamName}</span>
                                                <span class="team-name awayParticipant">${awayTeamName}</span> 
                                            </span> 
                                            <span class="score flex _F_c">
                                                <span>${homeTeamScore}</span>
                                                <span>${awayTeamScore}</span>
                                            </span>
                                            <span class="form-result ${event.result}">${event.result}</span>
                                        </div> 
                            `;
                            container.appendChild(eventElem);
                        });
                    };

                    // Function to fetch H2H events
                    const fetchH2HEvents = async (customId, currentMatchId, teamId) => {
                        const url = `${baseURL}/event/${customId}/h2h/events`;
                        try {
                            const response = await fetch(url);
                            const data = await response.json();
                            if (data && data.events) {
                                // Filter events based on the status and team ID
                                const finishedEvents = data.events
                                    .filter(event => event.status && event.status.type === 'finished' && event.id !== currentMatchId)
                                    .sort((a, b) => a.startTimestamp - b.startTimestamp);
                                return finishedEvents;
                            } else {
                                return [];
                            }
                        } catch (error) {
                            console.error('Error fetching H2H events:', error.message);
                            return [];
                        }
                    };

                    // Function to determine the result of the match
                    const determineResult = (homeScore, awayScore, teamId, homeTeamId) => {
                        if (homeScore > awayScore) {
                            return teamId === homeTeamId ? 'W' : 'L';
                        } else if (homeScore < awayScore) {
                            return teamId === homeTeamId ? 'L' : 'W';
                        } else {
                            return 'D';
                        }
                    };

                    // Function to display H2H events in the specified container
                    const displayH2H = (h2hData, containerId, teamId, filterHomeOnly = false) => {
                        const container = document.getElementById(containerId);
                        container.innerHTML = '';

                        // Filter events based on whether we want to show only home games or all games
                        const filteredEvents = filterHomeOnly 
                            ? h2hData.filter(event => event.homeTeam.id === teamId) // Only home team events at home
                            : h2hData.filter(event => event.homeTeam.id === teamId || event.awayTeam.id === teamId); // All relevant events

                        // Display events in reverse chronological order
                        filteredEvents.reverse().forEach(event => {
                            const homeScore = event.homeScore?.current ?? 0;
                            const awayScore = event.awayScore?.current ?? 0;

                            // Determine the match result (W, D, L) based on the score
                            const result = determineResult(homeScore, awayScore, teamId, event.homeTeam.id);

                            const isHomeTeamWinner = homeScore > awayScore;
                            const isAwayTeamWinner = awayScore > homeScore;

                            const homeTeamName = isHomeTeamWinner ? `<strong>${event.homeTeam.shortName}</strong>` : event.homeTeam.shortName;
                            const awayTeamName = isAwayTeamWinner ? `<strong>${event.awayTeam.shortName}</strong>` : event.awayTeam.shortName;

                            const homeTeamScore = isHomeTeamWinner ? `<strong>${homeScore}</strong>` : homeScore;
                            const awayTeamScore = isAwayTeamWinner ? `<strong>${awayScore}</strong>` : awayScore;

                            const eventElem = document.createElement('div');
                            eventElem.className = 'event-row';
                            eventElem.innerHTML = `
                                <div class="event__row flex _F_r gT10 _F_ac">
                                    <span class="event-date time">${new Date(event.startTimestamp * 1000).toLocaleDateString('en-GB', { day: '2-digit', month: '2-digit', year: '2-digit' }).replace(',', '.').replace('/', '.').replace('/', '.')}</span>
                                    <span class="tourn"><img src="${baseURL}/unique-tournament/${event.tournament.uniqueTournament.id}/image" alt="${event.tournament.uniqueTournament.name}"
                                                width="20" 
                                                height="20" 
                                                loading="lazy"
                                                onerror="this.onerror=null;this.src='https://www.sofascore.com/static/images/placeholders/tournament.svg';">
                                            </span>
                                    <span class="teamNames flex _F_c _F1">
                                        <span class="team-name homeParticipant">${homeTeamName}</span>
                                        <span class="team-name awayParticipant">${awayTeamName}</span> 
                                    </span> 
                                    <span class="score flex _F_c">
                                        <span>${homeTeamScore}</span>
                                        <span>${awayTeamScore}</span>
                                    </span>
                                    <span class="form-result ${result}">${result}</span>
                                </div> 
                            `;
                            container.appendChild(eventElem);
                        });
                    };
                    
  
                    const displayEventDetails = async (eventId) => {
                        const eventDetails = await fetchJson(`${baseURL}/event/${eventId}`);
                        if (!eventDetails) return;
                        const eventData = eventDetails.event;
                        const eventContainer = document.getElementById('details-container');
                        
                        eventContainer.innerHTML = `   
                                <div class="duelParticipant"> 
                                    <div class="match-time"> <span">
                                        ${new Date(eventData.startTimestamp * 1000).toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' }).replace(',', ' ').replace('/', ' ')}
                                        </span>
                                    </div>
                                    <div class="team duelParticipant__home">
                                        <img src="${baseURL}/team/${eventData.homeTeam.id}/image" width="16" height="16" alt="${eventData.homeTeam.shortName}" loading="lazy" class="team-logo">
                                        <div class="team-name">${eventData.homeTeam.shortName}</div>
                                    </div>

                                    <div class="duelParticipant__score score">
                                        <div class="detailScore__matchInfo">
                                            <div class="detailScore__wrapper">
                                                <span class="score">${eventData.homeScore?.current ?? ''}</span>
                                                <span class="detailScore__divider">-</span>
                                                <span class="score">${eventData.awayScore?.current ?? ''}</span>
                                            </div>
                                            <div class="detailScore__status">
                                                <span class="${eventData.status.type === 'inprogress' ? 'live' : '_detailStatus'}">
                                                    ${eventData.status.type === 'inprogress' ? 'Live' : eventData.status.type === 'finished' ? 'FINISHED' : new Date(eventData.startTimestamp * 1000).toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' })}    
                                                </span>
                                            </div>
                                        </div> 
                                    </div>
                                    <div class="team duelParticipant__away">
                                        <img src="${baseURL}/team/${eventData.awayTeam.id}/image" width="16" height="16" alt="${eventData.awayTeam.shortName}" loading="lazy" class="team-logo">
                                    <div class="team-name">${eventData.awayTeam.shortName}</div>
                                    </div>
                                </div>                    
                                <div id="next-match" class="flex _F_r _F_jc">
                                    <div id="home-next-match" class="next-match"></div>
                                    <div id="away-next-match" class="next-match"></div>
                                </div> 
                                            <!-- Tabs Navigation -->
                                <div id="events-tabs" class="tab-contentContainer">
                                    <div class="tab-menu">
                                        <button class="tab-button active" data-tab="overall-events">Overall</button>
                                        <button class="tab-button" data-tab="home-vs-away-events">Home vs Away</button>
                                    </div>
                                    <div class="tab-content active" id="overall-events">
                                        <!-- Tab content for Overall Events -->
                                        <div class="form-container flex _F_r _F_jc gT20">
                                            <div class="home-form">
                                                <h3>Last matches: ${eventData.homeTeam.shortName}</h3>
                                                <div id="home-team-form"></div>
                                            </div>
                                            <div class="away-form">
                                                <h3>Last matches: ${eventData.awayTeam.shortName}</h3>
                                                <div id="away-team-form"></div>
                                            </div>
                                        </div> 
                                        <div class="h2h">
                                            <h3>Head-to-head matches</h3>
                                            <div id="overallH2HContainer"></div>
                                        </div>
                                    </div>
                                    <div class="tab-content" id="home-vs-away-events">
                                        <!-- Tab content for Home vs Away Events -->
                                        <div class="form-container flex _F_r _F_jc gT20">
                                            <div class="atHome-form">
                                                <h3>Last Home matches: ${eventData.homeTeam.shortName}</h3>
                                                <div id="at-home-form"></div>
                                            </div>
                                            <div class="atAway-form">
                                                <h3>Last Away matches: ${eventData.awayTeam.shortName}</h3>
                                                <div id="at-away-form"></div>
                                            </div>
                                        </div>                                        
                                        <div class="h2h">
                                            <h3>Head-to-head matches</h3>
                                            <div id="homeTeamH2HContainer"></div>
                                        </div>
                                    </div>
                                </div>                  
                                `;
                        // Now update the standings container
                        updateStandingsContainer(eventData);
                    };
                    
                    const fetchTeamEvents = async (tournamentId, seasonId) => {
                        const url = `${baseURL}/tournament/${tournamentId}/season/${seasonId}/events`;
                        return fetchJson(url);
                    };

                    const calculateStats = (events) => {
                        const stats = {};

                        events.forEach(event => {
                            const teams = [
                                { team: event.homeTeam, opponent: event.awayTeam, isHome: true },
                                { team: event.awayTeam, opponent: event.homeTeam, isHome: false }
                            ];

                            teams.forEach(({ team, opponent, isHome }) => {
                                const teamName = team.name;

                                if (!stats[teamName]) {
                                    stats[teamName] = {
                                        overall: { GP: 0, W: 0, D: 0, L: 0, PTS: 0, FORM: [] },
                                        home: { GP: 0, W: 0, D: 0, L: 0, PTS: 0, FORM: [] },
                                        away: { GP: 0, W: 0, D: 0, L: 0, PTS: 0, FORM: [] }
                                    };
                                }

                                const context = isHome ? 'home' : 'away';
                                const result = { GP: 0, W: 0, D: 0, L: 0, PTS: 0, FORM: '' };

                                // Overall statistics
                                stats[teamName].overall.GP += 1;
                                stats[teamName][context].GP += 1;

                                if (team.score > opponent.score) {
                                    result.W += 1;
                                    result.PTS += 3;
                                    result.FORM = 'W';
                                } else if (team.score === opponent.score) {
                                    result.D += 1;
                                    result.PTS += 1;
                                    result.FORM = 'D';
                                } else {
                                    result.L += 1;
                                    result.FORM = 'L';
                                }

                                // Update overall stats
                                stats[teamName].overall.W += result.W;
                                stats[teamName].overall.D += result.D;
                                stats[teamName].overall.L += result.L;
                                stats[teamName].overall.PTS += result.PTS;
                                stats[teamName].overall.FORM.push(result.FORM);
                                if (stats[teamName].overall.FORM.length > 5) {
                                    stats[teamName].overall.FORM.shift(); // Keep last 5 results
                                }

                                // Update home/away stats
                                stats[teamName][context].W += result.W;
                                stats[teamName][context].D += result.D;
                                stats[teamName][context].L += result.L;
                                stats[teamName][context].PTS += result.PTS;
                                stats[teamName][context].FORM.push(result.FORM);
                                if (stats[teamName][context].FORM.length > 5) {
                                    stats[teamName][context].FORM.shift(); // Keep last 5 results
                                }
                            });
                        });

                        return stats;
                    };


                    // Generate tables for overall, home, and away forms:
                    const generateFormTable = (stats, context = 'overall') => {
                        const sortedTeams = Object.entries(stats).sort(([, a], [, b]) => b[context].PTS - a[context].PTS);

                        let tableHtml = `
                            <table>
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Team</th>
                                        <th>GP</th>
                                        <th>W</th>
                                        <th>D</th>
                                        <th>L</th>
                                        <th>PTS</th>
                                        <th>FORM (Last 5)</th>
                                    </tr>
                                </thead>
                                <tbody>
                        `;

                        sortedTeams.forEach(([teamName, teamStats], index) => {
                            tableHtml += `
                                <tr>
                                    <td>${index + 1}</td>
                                    <td>${teamName}</td>
                                    <td>${teamStats[context].GP}</td>
                                    <td>${teamStats[context].W}</td>
                                    <td>${teamStats[context].D}</td>
                                    <td>${teamStats[context].L}</td>
                                    <td>${teamStats[context].PTS}</td>
                                    <td>${teamStats[context].FORM.join(' ')}</td>
                                </tr>
                            `;
                        });

                        tableHtml += `
                                </tbody>
                            </table>
                        `;
                        
                        return tableHtml;
                    };



                    const updateStandingsContainer = async (eventData) => { 
    
                            const homeTeamId = eventData.homeTeam.id;
                            const awayTeamId = eventData.awayTeam.id;
                            const currentMatchId = eventData.id;
                            const currentMatchTimestamp = eventData.startTimestamp;

                            const tournamentId = eventData.tournament.id;
                            const seasonId = eventData.season.id
                            
                            console.log(`Tournament ID`, tournamentId);
                            console.log(`season ID`, seasonId);

                            await displayNextMatch(homeTeamId, 'home-next-match');
                            await displayNextMatch(awayTeamId, 'away-next-match'); 
                    
                            const homeTeamStats = await fetchTeamStats(homeTeamId, currentMatchId, currentMatchTimestamp);
                            displayLast5Events(homeTeamStats.overall, 'home-team-form');
                            displayLast5Events(homeTeamStats.home, 'at-home-form');

                            const awayTeamStats = await fetchTeamStats(awayTeamId, currentMatchId, currentMatchTimestamp);
                            displayLast5Events(awayTeamStats.overall, 'away-team-form');
                            displayLast5Events(awayTeamStats.away, 'at-away-form');

                            
                            const h2hEvents = await fetchH2HEvents(eventData.customId, currentMatchId, homeTeamId);

                            // Filter H2H events from the last 5 years
                            const filteredH2HEvents = h2hEvents.filter(h2hEvent => {
                                const eventDate = new Date(h2hEvent.startTimestamp * 1000);
                                const fiveYearsAgo = new Date();
                                fiveYearsAgo.setFullYear(fiveYearsAgo.getFullYear() - 5);
                                return eventDate >= fiveYearsAgo;
                            });

                            // Display overall head-to-head
                            displayH2H(filteredH2HEvents, 'overallH2HContainer', homeTeamId, false);

                            // Display only home team at home head-to-head
                            displayH2H(filteredH2HEvents, 'homeTeamH2HContainer', homeTeamId, true); 

                            // Fetch and display standings
                            const [totalStandings, homeStandings, awayStandings] = await Promise.all([
                                fetchStandings(tournamentId, seasonId, 'total'),
                                fetchStandings(tournamentId, seasonId, 'home'),
                                fetchStandings(tournamentId, seasonId, 'away')
                            ]); 
                            
                        
 
                    const generateStandingsTable = (data) => {
                    if (!data || !data.standings || !data.standings.length) return 'No data available'; 
                    let html = `
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Team</th>
                                <th>GP</th>
                                <th>W</th>
                                <th>D</th>
                                <th>L</th>
                                <th>GF</th>
                                <th>GA</th>
                                <th>Pts</th> 
                            </tr>
                        </thead>
                        <tbody>
                    `;
                    data.standings[0].rows.forEach(row => {
                        const teamName = row.team.shortName;
                        const rowClass = (row.team.id === homeTeamId || row.team.id === awayTeamId) ? 'our-team' : '';
                        html += `<tr class="${rowClass}">
                            <td>${row.position}</td>
                            <td>${teamName}</td>
                            <td>${row.matches}</td>
                            <td>${row.wins}</td>
                            <td>${row.draws}</td>
                            <td>${row.losses}</td>
                            <td>${row.scoresFor}</td>
                            <td>${row.scoresAgainst}</td>
                            <td>${row.points}</td> 
                        </tr>`;
                    });

                    html += '</tbody></table>';
                    return html;
                }; 

                
                // Calculate stats
                const data = await fetchTeamEvents(tournamentId, seasonId); 
                const events = data.events;
                console.log(events);
                const teamStats = calculateStats(events);
                // Generate tables for each context
                const totalFormTable = generateFormTable(teamStats, 'overall');
                const homeFormTable = generateFormTable(teamStats, 'home');
                const awayFormTable = generateFormTable(teamStats, 'away');
                // Generate tables
                const totalStandingsTable = generateStandingsTable(totalStandings);
                const homeStandingsTable = generateStandingsTable(homeStandings);
                const awayStandingsTable = generateStandingsTable(awayStandings);
 

            document.getElementById('standings-container').innerHTML = ` 
                <div id="main-tabs" class="tab-contentContainer">                
                        <div class="tab-menu">
                            <div class="tab-button active" data-tab="standings">Standings</div>
                            <div class="tab-button" data-tab="form">Form</div>
                            <div class="tab-button" data-tab="over-under">Over/Under</div>
                        </div>
                        <div id="standings" class="tab-content active">
                            <div class="tab-menu">
                                <button class="tab-button active" data-tab="total-standings">Total</button>
                                <button class="tab-button" data-tab="home-standings">Home</button>
                                <button class="tab-button" data-tab="away-standings">Away</button>
                            </div>
                            <div class="tab-content active" id="total-standings">${totalStandingsTable}</div>
                            <div class="tab-content" id="home-standings">${homeStandingsTable}</div>
                            <div class="tab-content" id="away-standings">${awayStandingsTable}</div>
                        </div>                        
                        <div class="tab-content" id="form">
                            <div class="tab-menu">
                                <button class="tab-button" data-tab="form-total-standings">Total</button>
                                <button class="tab-button" data-tab="form-home-standings">Home</button>
                                <button class="tab-button" data-tab="form-away-standings">Away</button>
                            </div>
                            <div class="tab-content active" id="form-total-standings">Overall form coming soon</div>
                                <div class="tab-content" id="form-home-standings">Home form coming soon</div>
                                <div class="tab-content" id="form-away-standings">Away form coming soon</div>
                        </div>                        
                        <div class="tab-content" id="over-under">
                            <div class="tab-menu">
                                <button class="tab-button" data-tab="ou-total-standings">Total</button>
                                <button class="tab-button" data-tab="ou-home-standings">Home</button>
                                <button class="tab-button" data-tab="ou-away-standings">Away</button>
                            </div>
                            <div id="ou-total-standings" class="tab-content">
                                <div class="tab-menu">
                                    <div class="tab-button" data-tab="total_over_05">+0.5</div>
                                    <div class="tab-button" data-tab="total_over_15">+1.5</div>
                                    <div class="tab-button" data-tab="total_over_25">+2.5</div>
                                    <div class="tab-button" data-tab="total_over_35">+3.5</div>
                                </div>
                                <div id="total_over_05" class="tab-content">+0.5 Content</div>
                                <div id="total_over_15" class="tab-content">+1.5 Content</div>
                                <div id="total_over_25" class="tab-content">+2.5 Content</div>
                                <div id="total_over_35" class="tab-content">+3.5 Content</div>
                            </div>
                            <div id="ou-home-standings" class="tab-content">
                                <div class="tab-menu">
                                    <div class="tab-button" data-tab="home_over_05">+0.5</div>
                                    <div class="tab-button" data-tab="home_over_15">+1.5</div>
                                    <div class="tab-button" data-tab="home_over_25">+2.5</div>
                                    <div class="tab-button" data-tab="home_over_35">+3.5</div>
                                </div>
                                <div id="home_over_05" class="tab-content">+0.5 Content</div>
                                <div id="home_over_15" class="tab-content">+1.5 Content</div>
                                <div id="home_over_25" class="tab-content">+2.5 Content</div>
                                <div id="home_over_35" class="tab-content">+3.5 Content</div>
                            </div> 
                            <div id="ou-away-standings" class="tab-content">
                                <div class="tab-menu">
                                    <div class="tab-button" data-tab="away_over_05">+0.5</div>
                                    <div class="tab-button" data-tab="away_over_15">+1.5</div>
                                    <div class="tab-button" data-tab="away_over_25">+2.5</div>
                                    <div class="tab-button" data-tab="away_over_35">+3.5</div>
                                </div>
                                <div id="away_over_05" class="tab-content">+0.5 Content</div>
                                <div id="away_over_15" class="tab-content">+1.5 Content</div>
                                <div id="away_over_25" class="tab-content">+2.5 Content</div>
                                <div id="away_over_35" class="tab-content">+3.5 Content</div>
                            </div> 
                        </div> 
                </div>
            `; 

    // Add event listeners for events tabs
 document.querySelectorAll('#events-tabs .tab-button').forEach(button => {
    button.addEventListener('click', () => {
        const tab = button.getAttribute('data-tab');

        document.querySelectorAll('#events-tabs .tab-button').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('#events-tabs .tab-content').forEach(content => content.classList.remove('active'));

        button.classList.add('active');
        document.getElementById(tab).classList.add('active');
    });
});  
    // Function to handle tab switching
    const handleTabClick = (event, tabContainer) => {
        const buttons = tabContainer.querySelectorAll('.tab-button');
        const contents = tabContainer.querySelectorAll('.tab-content');

        buttons.forEach(button => button.classList.remove('active'));
        contents.forEach(content => content.classList.remove('active'));

        const tabButton = event.target;
        const tabContent = tabContainer.querySelector(`#${tabButton.getAttribute('data-tab')}`);

        tabButton.classList.add('active');
        tabContent.classList.add('active');
    };

    // Add event listeners for main tabs
    const mainTabsContainer = document.getElementById('main-tabs');
    const mainTabButtons = mainTabsContainer.querySelectorAll('.tab-button');

    mainTabButtons.forEach(button => {
        button.addEventListener('click', (event) => {
            handleTabClick(event, mainTabsContainer);

            // Check which main tab is active and ensure the first sub-tab is active
            const activeMainTab = event.target.getAttribute('data-tab');
            if (activeMainTab === 'standings' || activeMainTab === 'form' || activeMainTab === 'over-under') {
                activateFirstSubTab(activeMainTab);
            }
        });
    });

    // Add event listeners for sub-tabs
    const addSubTabListeners = (containerId) => {
        const container = document.getElementById(containerId);
        const subTabButtons = container.querySelectorAll('.tab-button');

        subTabButtons.forEach(button => {
            button.addEventListener('click', (event) => {
                const mainTabButton = mainTabsContainer.querySelector(`.tab-button[data-tab="${containerId}"]`);
                const mainTabContent = mainTabsContainer.querySelector(`#${containerId}`);

                // Ensure the main tab remains active
                mainTabButton.classList.add('active');
                mainTabContent.classList.add('active');

                handleTabClick(event, container);

                // If this sub-tab contains its own sub-tabs, activate the first one
                const subTabContentId = event.target.getAttribute('data-tab');
                const subTabContent = document.getElementById(subTabContentId);
                if (subTabContent) {
                    activateFirstSubTab(subTabContentId);
                }
            });
        });
    };

    // Activate the first sub-tab within the active main tab
    const activateFirstSubTab = (tabId) => {
        const tabContent = document.getElementById(tabId);
        if (!tabContent) return;

        // Reset active state for all sub-tabs
        tabContent.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active'));
        tabContent.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

        // Activate the first sub-tab
        const firstSubTabButton = tabContent.querySelector('.tab-menu .tab-button');
         if (firstSubTabButton) {
        const firstSubTabContentId = firstSubTabButton.getAttribute('data-tab');
        const firstSubTabContent = tabContent.querySelector(`#${firstSubTabContentId}`);

        firstSubTabButton.classList.add('active');
        if (firstSubTabContent) {
            firstSubTabContent.classList.add('active');

            // If the first sub-tab has its own sub-tabs, activate the first tab
            const subSubTabButtons = firstSubTabContent.querySelectorAll('.tab-button');
            if (subSubTabButtons.length > 0) {
                handleTabClick({ target: subSubTabButtons[0] }, firstSubTabContent);
            }
        }
    }
    };

    // Add sub-tab listeners for each tab
    const addSubTabListenersForAllTabs = (mainTabIds) => {
        mainTabIds.forEach(id => addSubTabListeners(id));
    };

    // Add listeners for sub-sub-tabs within each main tab 
    const addSubTabListenersForSubSubTabs = (mainTabId) => {
        const mainTabContent = document.getElementById(mainTabId);
        if (!mainTabContent) return;

        const subTabs = mainTabContent.querySelectorAll('.tab-content');

        subTabs.forEach(subTab => {
            const subTabId = subTab.id;
            addSubTabListeners(subTabId); // Adds listeners to sub-tabs within the current sub-tab

            // Add listeners for sub-sub-tabs within each sub-tab
            addSubTabListenersForSubSubTabs(subTabId);
        });
    };

    // Initialize the main tab and its first sub-tab as active on page load
    const initializeTabs = () => {
        activateFirstSubTab('standings'); // Assuming 'standings' is a main tab ID
        addSubTabListenersForAllTabs(['standings', 'form', 'over-under']);
        addSubTabListenersForSubSubTabs('over-under'); // Initialize nested sub-sub-tabs
    };

    initializeTabs();
 
        };

                    
            const fetchStandings = async (tournamentId, seasonId, type) => {
                const url = `${baseURL}/tournament/${tournamentId}/season/${seasonId}/standings/${type}`;
                return await fetchJson(url);
            };
 
            document.addEventListener('DOMContentLoaded', () => {
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('start-date').value = today;
                document.getElementById('end-date').value = today;

                // Initial data load
                displayCategories(today, today, '');

                document.getElementById('filter-btn').addEventListener('click', () => {
                    const startDate = document.getElementById('start-date').value;
                    const endDate = document.getElementById('end-date').value;
                    const hours = document.getElementById('time-range').value;
                    displayCategories(startDate, endDate, hours);
                });

                document.querySelectorAll('.main-nav a').forEach(link => {
                    link.addEventListener('click', async event => {
                        event.preventDefault();
                        const filterType = link.getAttribute('href').replace('#', '');

                        let startDate = today;
                        let endDate = today;
                        let hours = '';

                        switch (filterType) {
                            case 'all-games':
                                displayCategories(startDate, endDate, hours);
                                break;
                            case 'live-games':
                                displayCategories(startDate, endDate, hours, 'live');
                                break;
                            case 'finished-games':
                                displayCategories(startDate, endDate, hours, 'finished');
                                break;
                            case 'scheduled-games':
                                displayCategories(startDate, endDate, hours, 'scheduled');
                                break;
                            default:
                                displayCategories(startDate, endDate, hours);
                                break;
                        }

                        // Remove 'active' class from all links
                        document.querySelectorAll('.main-nav a').forEach(link => {
                            link.classList.remove('active');
                        });

                        // Add 'active' class to the clicked link
                        event.target.classList.add('active');
                    });
                });

                

            });





// Helper function to convert fractional odds to decimal
function fractionalToDecimal(fractionalOdds) {
    const [numerator, denominator] = fractionalOdds.split('/');
    return (parseInt(numerator) / parseInt(denominator) + 1).toFixed(2);
}

        </script> 
    </body>
</html>